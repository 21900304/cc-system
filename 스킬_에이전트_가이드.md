# 스킬(Skills)과 에이전트(Agents) 완벽 가이드

> cc-system에서 AI 기능 확장하는 방법

---

## 🎯 핵심 개념

### 스킬(Skill) = 교육 교재 📚
- **역할**: AI에게 "이렇게 하라"고 가르치는 지식 문서
- **구성**: SKILL.md + 선택적 scripts/ + references/
- **언제 사용**: 특정 작업의 방법론, 체크리스트, 예시를 제공할 때

### 에이전트(Agent) = 전문 AI 직원 🤖
- **역할**: 실제로 일을 처리하는 AI
- **구성**: 단일 .md 파일 (YAML frontmatter + system prompt)
- **언제 사용**: 특정 작업을 자동으로 수행하게 하고 싶을 때

---

## 🔑 핵심 차이

| 구분 | 스킬 | 에이전트 |
|------|------|----------|
| **비유** | 요리책 | 요리사 |
| **역할** | 방법 가르치기 | 직접 실행하기 |
| **자동 실행** | ❌ 사용자가 물어봐야 함 | ✅ 상황에 따라 자동 실행 |
| **파일 수** | 여러 파일 가능 | 단일 파일 |
| **생성 방법** | 스크립트 자동 생성 | 수동 작성 또는 AI 생성 |

---

## 🔄 완벽한 생성 워크플로우

### Phase 1: 스킬 생성 (자동화)

```bash
# 1. 스킬 생성 스크립트 실행
python3 .claude/skills/skill-creator/scripts/init_skill.py {스킬이름} --path .claude/skills

# 예시
python3 .claude/skills/skill-creator/scripts/init_skill.py pdf-processor --path .claude/skills
```

**결과:**
```
.claude/skills/pdf-processor/
├── SKILL.md              ← [수정 필요] 메인 교재
├── scripts/              ← [선택] 유틸리티 스크립트
│   └── example.py
├── references/           ← [선택] 상세 문서
│   └── api_reference.md
└── assets/               ← [선택] 템플릿, 이미지
    └── example_asset.txt
```

### Phase 2: 스킬 내용 작성 (수동)

**SKILL.md 작성:**
```markdown
---
name: pdf-processor
description: PDF 파일 처리 방법론. 텍스트 추출, 병합, 분할 작업 시 사용.
---

# PDF 처리 가이드

## 개요
PDF 파일을 다루는 방법을 설명합니다.

## 주요 기능
- 텍스트 추출
- 페이지 병합
- 파일 분할

## 사용법
```python
# scripts/extract_text.py 사용
from scripts.extract_text import extract_text
text = extract_text("document.pdf")
```
```

**(선택) 스크립트 추가:**
```python
# .claude/skills/pdf-processor/scripts/extract_text.py
#!/usr/bin/env python3
import pdfplumber

def extract_text(pdf_path: str) -> str:
    """PDF에서 텍스트를 추출합니다."""
    with pdfplumber.open(pdf_path) as pdf:
        return "\n".join(page.extract_text() for page in pdf.pages)
```

### Phase 3: 에이전트 생성 (수동 또는 AI 요청)

**방법 A: 직접 작성**
```markdown
---
name: pdf-agent
description: PDF 처리 전문가. PDF 파일 작업이 필요할 때 사용. Use proactively when working with PDF files.
tools: Read, Bash, Write
skills: pdf-processor    # ← 스킬 연결!
model: sonnet
---

당신은 PDF 처리 전문가입니다.

## 역할
- PDF 파일에서 텍스트 추출
- PDF 병합 및 분할
- PDF 형식 변환

## 작업 흐름
1. pdf-processor 스킬의 가이드를 확인
2. scripts/extract_text.py 등의 도구 활용
3. 작업 수행 및 결과 반환
```

**방법 B: AI에게 요청**
```
사용자: "subagent-creator.md를 참고해서 pdf-processor 스킬을 활용하는 
        pdf-agent를 만들어줘"

AI의 동작:
1. subagent-creator.md 읽기 (에이전트 만드는 방법 학습)
2. pdf-processor/SKILL.md 읽기 (스킬 내용 확인)
3. .claude/agents/pdf-agent.md 생성
```

---

## 📊 스킬 vs 에이전트 구조 비교

### 스킬 구조
```
.claude/skills/{skill-name}/
├── SKILL.md           # 필수: 메인 문서 (YAML frontmatter + 내용)
├── scripts/           # 선택: 실행 코드
│   ├── script1.py
│   └── script2.sh
├── references/        # 선택: 참고 문서
│   ├── guide.md
│   └── checklist.md
└── assets/            # 선택: 자원 파일
    └── template.pdf
```

### 에이전트 구조
```
.claude/agents/{agent-name}.md    # 단일 파일
```

**에이전트 파일 내용:**
```markdown
---
name: {agent-name}                    # 에이전트 이름
description: {설명}                   # 언제 사용할지
tools: {도구 목록}                    # Read, Write, Edit 등
skills: {skill-name}                  # ← 연결할 스킬 (선택)
model: {sonnet|opus|haiku}           # AI 모델 (선택)
---

# System Prompt (역할, 작업 흐름, 가이드라인)
```

---

## 🎬 실제 사용 시나리오

### 시나리오 1: 코드 리뷰 시스템 만들기

```bash
# 1. 스킬 생성
python3 .claude/skills/skill-creator/scripts/init_skill.py code-review-guide --path .claude/skills

# 2. 스킬 내용 작성 (SKILL.md + references/checklist.md)
# ... 내용 작성 ...

# 3. 에이전트 생성
# .claude/agents/code-reviewer.md 작성
```

**사용:**
```
사용자: "방금 짠 코드 리뷰해줘"
AI: code-reviewer 에이전트 자동 호출
   → code-review-guide 스킬 참조
   → 체크리스트 기반 리뷰 수행
   → 결과 출력
```

### 시나리오 2: API 통합 도우미 만들기

```bash
# 1. 스킬 생성
python3 .claude/skills/skill-creator/scripts/init_skill.py api-helper --path .claude/skills

# 2. 스킬 내용 작성
# - API 문서 작성
# - 스크립트 작성 (scripts/fetch_data.py)

# 3. 에이전트 생성
# .claude/agents/api-integrator.md 작성
```

---

## 💡 팁 & 모범 사례

### 1. 언제 뭘 만들어야 하나?

| 상황 | 추천 | 예시 |
|------|------|------|
| **단순 지식 제공** | 스킬만 | "Python Best Practices" |
| **자동 작업 수행** | 에이전트만 | "코드 자동 포맷터" |
| **복잡한 작업** | 둘 다 | "코드 리뷰어" (스킬: 방법론, 에이전트: 실행) |
| **반복 자동화** | 스킬 + 스크립트 | "PDF 변환기" |

### 2. 스킬과 에이전트 연결

**에이전트에서 스킬 사용하기:**
```yaml
---
skills: my-skill    # ← 이 한 줄로 연결!
---
```

**에이전트 내부에서 스킬 참조:**
```markdown
## 작업 방법
1. 먼저 my-skill 스킬의 SKILL.md를 읽으세요
2. scripts/my_script.py를 활용하세요
3. references/guide.md를 참고하세요
```

### 3. 네이밍 규칙

| 대상 | 규칙 | 예시 |
|------|------|------|
| 스킬 이름 | `hyphen-case` | `code-review-guide`, `pdf-processor` |
| 에이전트 이름 | `hyphen-case` | `code-reviewer`, `pdf-agent` |
| 스크립트 파일 | `snake_case.py` | `extract_text.py`, `validate_data.py` |

### 4. 파일 정리

**스킬 생성 후 불필요한 파일 삭제:**
```bash
# 예시 파일들 삭제
rm .claude/skills/my-skill/scripts/example.py
rm .claude/skills/my-skill/assets/example_asset.txt

# 최소 구조 유지
# - SKILL.md (필수)
# - scripts/ (필요한 경우만)
# - references/ (필요한 경우만)
```

---

## 🚀 빠른 시작 템플릿

### 템플릿 1: 최소 스킬

```markdown
---
name: {skill-name}
description: {이 스킬이 뭔지, 언제 쓰는지 설명}
---

# {제목}

## 개요
한 두 문장으로 설명

## 사용법
구체적인 예시와 절차
```

### 템플릿 2: 최소 에이전트

```markdown
---
name: {agent-name}
description: {이 에이전트가 뭔지, 언제 부르는지} ("Use proactively" 넣으면 자동 호출)
tools: Read, Write, Edit  # 필요한 도구
skills: {skill-name}      # 연결할 스킬 (선택)
---

당신은 {전문 분야} 전문가입니다.

## 역할
- 할 일 1
- 할 일 2

## 작업 흐름
1. 단계 1
2. 단계 2
3. 단계 3
```

---

## ❌ 흔한 실수

### 1. 스킬에 에이전트를 넣으려고 함
```
❌ .claude/skills/my-skill/agent.md
✅ .claude/agents/my-agent.md
```

### 2. 에이전트에 스킬 구조로 만듦
```
❌ .claude/agents/my-agent/
   ├── agent.md
   └── scripts/

✅ .claude/agents/my-agent.md    # 단일 파일
```

### 3. 스킬 이름과 에이전트 이름이 같음
```
❌ 스킬: code-reviewer + 에이전트: code-reviewer
✅ 스킬: code-review-guide + 에이전트: code-reviewer
```

---

## 📋 체크리스트

### 스킬 생성 시
- [ ] `init_skill.py`로 생성
- [ ] SKILL.md에 YAML frontmatter 포함
- [ ] 불필요한 예시 파일 삭제
- [ ] 필요시 scripts/에 유틸리티 추가
- [ ] `quick_validate.py`로 검증

### 에이전트 생성 시
- [ ] `.claude/agents/`에 저장
- [ ] YAML frontmatter에 `name`, `description` 필수
- [ ] `skills: {skill-name}`으로 스킬 연결 (선택)
- [ ] System prompt에 역할과 작업 흐름 명시
- [ ] "Use proactively" 포함시 자동 호출 가능

---

## 🎯 요약

1. **스킬** = 방법론/지식을 담은 문서 집합
   - 생성: `init_skill.py` 스크립트
   - 위치: `.claude/skills/{name}/`

2. **에이전트** = 일을 수행하는 AI 정의
   - 생성: 수동 작성 또는 AI 요청
   - 위치: `.claude/agents/{name}.md`

3. **연결**: 에이전트의 YAML frontmatter에서 `skills: {name}`으로 연결

4. **사용**: 사용자가 관련 작업 요청 → 에이전트 자동 호출 → 스킬 참조 → 작업 수행

---

**핵심 한 줄:**
> 스킬은 **가르치는 교재**, 에이전트는 **실행하는 직원**. 에이전트가 스킬(교재)을 읽고 일을 한다!
